{% extends 'base.html' %}

{% block title %}কর্মচারী বিস্তারিত তথ্য{% endblock %}
{% block page_title %}কর্মচারী বিস্তারিত তথ্য{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/print-js/1.6.0/print.min.css">
<style>
    @media print {
        @page {
            size: A4 portrait;
            margin: 12mm;
        }
        
        .print\\:page-break {
            page-break-after: always;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="space-y-6">
    <!-- Action Bar -->
    <div class="flex items-center justify-between print:hidden">
        <div>
            <h1 class="text-2xl font-bold tracking-tight text-foreground">কর্মচারী বিস্তারিত তথ্য</h1>
            <p class="text-muted-foreground mt-1">সম্পূর্ণ প্রোফাইল এবং কর্মসংস্থান বিবরণ</p>
        </div>
        <div class="flex gap-3">
            <a href="{% url 'zkteco:employee_list' %}" 
               class="inline-flex items-center px-4 py-2 border border-input text-sm font-medium rounded-lg shadow-sm text-foreground bg-background hover:bg-accent transition-all">
                <svg class="mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                </svg>
                ফিরে যান
            </a>
            <a href="{% url 'zkteco:employee_update' employee.pk %}" 
               class="inline-flex items-center px-4 py-2 border border-input text-sm font-medium rounded-lg shadow-sm text-foreground bg-background hover:bg-accent transition-all">
                <svg class="mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                </svg>
                সম্পাদনা করুন
            </a>
            <button onclick="printEmployeeDetails()" 
                    class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-primary-foreground bg-primary hover:opacity-90 transition-all">
                <svg class="mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"/>
                </svg>
                প্রিন্ট করুন
            </button>
        </div>
    </div>

    <!-- Main Content Card -->
    <div class="bg-card rounded-lg shadow-lg border border-border overflow-hidden">
        <div id="printable-area">
            <!-- Print Header -->
            <div id="print-header" class="hidden print:block">
                <div class="print-header-content">
                    <div class="print-header-left">
                        <h1 class="print-company-name">{{ employee.company.name }}</h1>
                        <p class="print-company-address">{{ employee.company.address|default:"ঠিকানা উল্লেখ করুন" }}</p>
                    </div>
                    <div class="print-header-center">
                        <h2 class="print-report-title">কর্মচারী বিস্তারিত তথ্য</h2>
                        <p class="print-report-period">{{ employee.name }} ({{ employee.employee_id }})</p>
                    </div>
                    <div class="print-header-right">
                        <p class="print-generation-date">তারিখ: {% now "d F, Y" %}</p>
                        <p class="print-generation-date">সময়: {% now "H:i" %}</p>
                    </div>
                </div>
                <div class="print-header-border"></div>
            </div>

            <!-- Employee Profile Header -->
            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 p-8 border-b-4 border-primary">
                <div class="flex items-start gap-8">
                    <!-- Photo -->
                    <div class="flex-shrink-0">
                        <div class="w-40 h-40 rounded-xl bg-white dark:bg-gray-800 flex items-center justify-center border-4 border-white dark:border-gray-700 shadow-xl overflow-hidden">
                            {% if employee.photo %}
                                <img src="{{ employee.photo.url }}" alt="{{ employee.name }}" class="w-full h-full object-cover">
                            {% else %}
                                <svg class="w-20 h-20 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                </svg>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Basic Info -->
                    <div class="flex-1">
                        <div class="flex items-start justify-between mb-4">
                            <div>
                                <h2 class="text-4xl font-bold text-foreground mb-2">{{ employee.name }}</h2>
                                <p class="text-lg text-muted-foreground">{{ employee.designation.name }} • {{ employee.department.name }}</p>
                            </div>
                            {% if employee.is_active %}
                                <span class="inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200">
                                    <span class="w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"></span>
                                    সক্রিয়
                                </span>
                            {% else %}
                                <span class="inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200">
                                    <span class="w-2 h-2 bg-red-500 rounded-full mr-2"></span>
                                    নিষ্ক্রিয়
                                </span>
                            {% endif %}
                        </div>

                        <!-- Quick Info Cards -->
                        <div class="grid grid-cols-3 gap-4">
                            <div class="bg-white/70 dark:bg-gray-800/70 rounded-lg p-4 backdrop-blur-sm">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900 flex items-center justify-center">
                                        <svg class="w-6 h-6 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0"/>
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="text-xs text-muted-foreground">কর্মচারী আইডি</p>
                                        <p class="text-lg font-bold text-foreground">{{ employee.employee_id }}</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white/70 dark:bg-gray-800/70 rounded-lg p-4 backdrop-blur-sm">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900 flex items-center justify-center">
                                        <svg class="w-6 h-6 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="text-xs text-muted-foreground">যোগদান</p>
                                        <p class="text-lg font-bold text-foreground">{{ employee.joining_date|date:"d M, Y" }}</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white/70 dark:bg-gray-800/70 rounded-lg p-4 backdrop-blur-sm">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900 flex items-center justify-center">
                                        <svg class="w-6 h-6 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="text-xs text-muted-foreground">যোগাযোগ</p>
                                        <p class="text-lg font-bold text-foreground">{{ employee.contact_number|default:"-" }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Information Sections -->
            <div class="p-8 space-y-8">
                <!-- Row 1: Personal & Employment -->
                <div class="grid grid-cols-2 gap-8">
                    <!-- Personal Information -->
                    <div class="bg-gradient-to-br from-blue-50/50 to-white dark:from-blue-950/50 dark:to-gray-900 rounded-xl border-2 border-blue-100 dark:border-blue-900 p-6">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-12 h-12 rounded-lg bg-blue-500 flex items-center justify-center">
                                <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                </svg>
                            </div>
                            <h3 class="text-xl font-bold text-foreground">ব্যক্তিগত তথ্য</h3>
                        </div>
                        <div class="space-y-4">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <p class="text-xs text-muted-foreground mb-1">প্রথম নাম</p>
                                    <p class="text-sm font-semibold text-foreground">{{ employee.first_name|default:"-" }}</p>
                                </div>
                                <div>
                                    <p class="text-xs text-muted-foreground mb-1">শেষ নাম</p>
                                    <p class="text-sm font-semibold text-foreground">{{ employee.last_name|default:"-" }}</p>
                                </div>
                            </div>
                            <div class="border-t border-border pt-4">
                                <p class="text-xs text-muted-foreground mb-1">জন্ম তারিখ</p>
                                <p class="text-sm font-semibold text-foreground">{{ employee.date_of_birth|date:"d F, Y"|default:"-" }}</p>
                            </div>
                            <div class="border-t border-border pt-4">
                                <p class="text-xs text-muted-foreground mb-1">জাতীয় পরিচয়পত্র</p>
                                <p class="text-sm font-semibold text-foreground">{{ employee.nid|default:"-" }}</p>
                            </div>
                            <div class="border-t border-border pt-4">
                                <p class="text-xs text-muted-foreground mb-1">বৈবাহিক অবস্থা</p>
                                <p class="text-sm font-semibold text-foreground">{{ employee.get_marital_status_display|default:"-" }}</p>
                            </div>
                        </div>
                    </div>

                    <!-- Employment Details -->
                    <div class="bg-gradient-to-br from-purple-50/50 to-white dark:from-purple-950/50 dark:to-gray-900 rounded-xl border-2 border-purple-100 dark:border-purple-900 p-6">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-12 h-12 rounded-lg bg-purple-500 flex items-center justify-center">
                                <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                </svg>
                            </div>
                            <h3 class="text-xl font-bold text-foreground">কর্মসংস্থান বিবরণ</h3>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <p class="text-xs text-muted-foreground mb-1">কোম্পানি</p>
                                <p class="text-sm font-semibold text-foreground">{{ employee.company.name }}</p>
                            </div>
                            <div class="border-t border-border pt-4">
                                <p class="text-xs text-muted-foreground mb-1">ZKTeco আইডি</p>
                                <p class="text-sm font-semibold text-foreground">{{ employee.zkteco_id|default:"-" }}</p>
                            </div>
                            <div class="border-t border-border pt-4">
                                <p class="text-xs text-muted-foreground mb-1">ডিফল্ট শিফট</p>
                                <p class="text-sm font-semibold text-foreground">{{ employee.default_shift.name|default:"-" }}</p>
                            </div>
                            <div class="grid grid-cols-2 gap-4 border-t border-border pt-4">
                                <div>
                                    <p class="text-xs text-muted-foreground mb-1">কাজের ঘণ্টা</p>
                                    <p class="text-sm font-semibold text-foreground">{{ employee.expected_working_hours|default:"-" }} ঘণ্টা</p>
                                </div>
                                <div>
                                    <p class="text-xs text-muted-foreground mb-1">OT গ্রেস</p>
                                    <p class="text-sm font-semibold text-foreground">{{ employee.overtime_grace_minutes|default:"0" }} মিনিট</p>
                                </div>
                            </div>
                            <div class="border-t border-border pt-4">
                                <p class="text-xs text-muted-foreground mb-1">ব্যবহারকারী অ্যাকাউন্ট</p>
                                <p class="text-sm font-semibold text-foreground">{{ employee.user.username|default:"-" }}</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Salary Overview Cards -->
                <div class="grid grid-cols-4 gap-4">
                    <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white shadow-lg">
                        <div class="flex items-center justify-between mb-3">
                            <p class="text-sm font-medium opacity-90">মূল বেতন</p>
                            <svg class="w-8 h-8 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <p class="text-3xl font-bold">৳{{ employee.basic_salary|floatformat:0 }}</p>
                    </div>

                    <div class="bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white shadow-lg">
                        <div class="flex items-center justify-between mb-3">
                            <p class="text-sm font-medium opacity-90">ঘণ্টা প্রতি হার</p>
                            <svg class="w-8 h-8 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <p class="text-3xl font-bold">৳{{ employee.per_hour_rate|floatformat:0 }}</p>
                    </div>

                    <div class="bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white shadow-lg">
                        <div class="flex items-center justify-between mb-3">
                            <p class="text-sm font-medium opacity-90">ওভারটাইম হার</p>
                            <svg class="w-8 h-8 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                            </svg>
                        </div>
                        <p class="text-3xl font-bold">৳{{ employee.overtime_rate|floatformat:0 }}</p>
                    </div>

                    <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white shadow-lg">
                        <div class="flex items-center justify-between mb-3">
                            <p class="text-sm font-medium opacity-90">মোট আয়</p>
                            <svg class="w-8 h-8 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
                            </svg>
                        </div>
                        <p class="text-3xl font-bold">৳{{ total_income|floatformat:0 }}</p>
                    </div>
                </div>

                <!-- Allowances & Deductions -->
                <div class="grid grid-cols-2 gap-8">
                    <!-- Allowances -->
                    <div class="bg-gradient-to-br from-green-50/50 to-white dark:from-green-950/50 dark:to-gray-900 rounded-xl border-2 border-green-100 dark:border-green-900 p-6">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-12 h-12 rounded-lg bg-green-500 flex items-center justify-center">
                                <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                                </svg>
                            </div>
                            <h3 class="text-xl font-bold text-foreground">ভাতা সমূহ</h3>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-green-200 dark:border-green-800">
                                <span class="text-sm text-muted-foreground">বাড়ি ভাড়া ভাতা</span>
                                <span class="text-sm font-bold text-green-600 dark:text-green-400">৳{{ employee.house_rent_allowance|floatformat:0 }}</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-green-200 dark:border-green-800">
                                <span class="text-sm text-muted-foreground">চিকিৎসা ভাতা</span>
                                <span class="text-sm font-bold text-green-600 dark:text-green-400">৳{{ employee.medical_allowance|floatformat:0 }}</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-green-200 dark:border-green-800">
                                <span class="text-sm text-muted-foreground">যাতায়াত ভাতা</span>
                                <span class="text-sm font-bold text-green-600 dark:text-green-400">৳{{ employee.conveyance_allowance|floatformat:0 }}</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-green-200 dark:border-green-800">
                                <span class="text-sm text-muted-foreground">খাদ্য ভাতা</span>
                                <span class="text-sm font-bold text-green-600 dark:text-green-400">৳{{ employee.food_allowance|floatformat:0 }}</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-green-200 dark:border-green-800">
                                <span class="text-sm text-muted-foreground">উপস্থিতি বোনাস</span>
                                <span class="text-sm font-bold text-green-600 dark:text-green-400">৳{{ employee.attendance_bonus|floatformat:0 }}</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-green-200 dark:border-green-800">
                                <span class="text-sm text-muted-foreground">উৎসব বোনাস</span>
                                <span class="text-sm font-bold text-green-600 dark:text-green-400">৳{{ employee.festival_bonus|floatformat:0 }}</span>
                            </div>
                        </div>
                    </div>

                    <!-- Deductions -->
                    <div class="bg-gradient-to-br from-red-50/50 to-white dark:from-red-950/50 dark:to-gray-900 rounded-xl border-2 border-red-100 dark:border-red-900 p-6">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-12 h-12 rounded-lg bg-red-500 flex items-center justify-center">
                                <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/>
                                </svg>
                            </div>
                            <h3 class="text-xl font-bold text-foreground">কর্তন সমূহ</h3>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-red-200 dark:border-red-800">
                                <span class="text-sm text-muted-foreground">ভবিষ্য তহবিল</span>
                                <span class="text-sm font-bold text-red-600 dark:text-red-400">৳{{ employee.provident_fund|floatformat:0 }}</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-red-200 dark:border-red-800">
                                <span class="text-sm text-muted-foreground">কর কর্তন</span>
                                <span class="text-sm font-bold text-red-600 dark:text-red-400">৳{{ employee.tax_deduction|floatformat:0 }}</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-red-200 dark:border-red-800">
                                <span class="text-sm text-muted-foreground">ঋণ কর্তন</span>
                                <span class="text-sm font-bold text-red-600 dark:text-red-400">৳{{ employee.loan_deduction|floatformat:0 }}</span>
                            </div>
                        </div>

                        <!-- Payroll Info -->
                        <div class="mt-6 pt-6 border-t border-red-200 dark:border-red-800">
                            <h4 class="text-sm font-semibold text-foreground mb-4">পেরোল তথ্য</h4>
                            <div class="space-y-3">
                                <div>
                                    <p class="text-xs text-muted-foreground mb-1">ব্যাংক অ্যাকাউন্ট নম্বর</p>
                                    <p class="text-sm font-semibold text-foreground">{{ employee.bank_account_no|default:"-" }}</p>
                                </div>
                                <div>
                                    <p class="text-xs text-muted-foreground mb-1">পেমেন্ট পদ্ধতি</p>
                                    <p class="text-sm font-semibold text-foreground">{{ employee.get_payment_method_display|default:"-" }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Net Salary Summary -->
                <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-white shadow-2xl">
                    <div class="grid grid-cols-3 gap-8">
                        <div class="text-center">
                            <p class="text-sm font-medium opacity-90 mb-2">মোট আয়</p>
                            <p class="text-4xl font-bold">৳{{ total_income|floatformat:0 }}</p>
                            <p class="text-xs opacity-75 mt-2">বেতন + ভাতা</p>
                        </div>
                        <div class="text-center border-x border-white/20">
                            <p class="text-sm font-medium opacity-90 mb-2">মোট কর্তন</p>
                            <p class="text-4xl font-bold">৳{{ total_deductions|floatformat:0 }}</p>
                            <p class="text-xs opacity-75 mt-2">সকল ডিডাকশন</p>
                        </div>
                        <div class="text-center">
                            <p class="text-sm font-medium opacity-90 mb-2">নিট বেতন</p>
                            <p class="text-4xl font-bold">৳{{ net_salary|floatformat:0 }}</p>
                            <p class="text-xs opacity-75 mt-2">হাতে পাবেন</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Print Footer -->
            <div id="print-footer" class="hidden print:block">
                <div class="print-footer-border"></div>
                <div class="print-footer-content">
                    <div class="print-signature-section">
                        <div class="print-signature-box">
                            <div class="print-signature-line"></div>
                            <p>প্রস্তুতকারী</p>
                            <p class="print-signature-designation">এইচআর বিভাগ</p>
                        </div>
                        <div class="print-signature-box">
                            <div class="print-signature-line"></div>
                            <p>যাচাইকারী</p>
                            <p class="print-signature-designation">বিভাগীয় প্রধান</p>
                        </div>
                        <div class="print-signature-box">
                            <div class="print-signature-line"></div>
                            <p>অনুমোদনকারী</p>
                            <p class="print-signature-designation">ব্যবস্থাপনা পরিচালক</p>
                        </div>
                    </div>
                    <div class="print-footer-note">
                        <p>এই নথিটি কম্পিউটার দ্বারা তৈরি এবং স্বাক্ষরের প্রয়োজন নেই</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/print-js/1.6.0/print.min.js"></script>
<script>
function printEmployeeDetails() {
    printJS({
        printable: 'printable-area',
        type: 'html',
        targetStyles: ['*'],
        style: `
            @page {
                size: A4 portrait;
                margin: 10mm;
            }
            
            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
            
            body {
                font-family: 'Noto Sans Bengali', 'SolaimanLipi', Arial, sans-serif;
                font-size: 10px;
                line-height: 1.4;
                color: #000;
            }
            
            .print\\:hidden { display: none !important; }
            .print\\:block { display: block !important; }
            
            /* Print Header */
            #print-header {
                margin-bottom: 15px;
                page-break-inside: avoid;
            }
            
            .print-header-content {
                display: grid;
                grid-template-columns: 1fr 2fr 1fr;
                gap: 10px;
                padding-bottom: 10px;
                align-items: start;
            }
            
            .print-header-left { text-align: left; }
            .print-header-center { text-align: center; }
            .print-header-right { text-align: right; }
            
            .print-company-name {
                font-size: 16px;
                font-weight: bold;
                margin: 0 0 4px 0;
            }
            
            .print-company-address {
                font-size: 9px;
                color: #333;
                margin: 0;
            }
            
            .print-report-title {
                font-size: 18px;
                font-weight: bold;
                margin: 0 0 4px 0;
                text-decoration: underline;
            }
            
            .print-report-period {
                font-size: 11px;
                color: #333;
                margin: 0;
            }
            
            .print-generation-date {
                font-size: 8px;
                color: #666;
                margin: 0;
            }
            
            .print-header-border {
                border-bottom: 2px solid #000;
                margin-top: 3px;
                margin-bottom: 15px;
            }
            
            /* Layout */
            .space-y-8 > * + * { margin-top: 15px; }
            .space-y-6 > * + * { margin-top: 12px; }
            .space-y-4 > * + * { margin-top: 8px; }
            .space-y-3 > * + * { margin-top: 6px; }
            .gap-8 { gap: 15px; }
            .gap-6 { gap: 12px; }
            .gap-4 { gap: 8px; }
            .gap-3 { gap: 6px; }
            .p-8 { padding: 15px; }
            .p-6 { padding: 12px; }
            .p-4 { padding: 8px; }
            .p-3 { padding: 6px; }
            
            /* Grid */
            .grid { display: grid; }
            .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
            .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
            .grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
            
            /* Typography */
            .text-4xl { font-size: 24px; }
            .text-3xl { font-size: 20px; }
            .text-2xl { font-size: 16px; }
            .text-xl { font-size: 14px; }
            .text-lg { font-size: 12px; }
            .text-sm { font-size: 9px; }
            .text-xs { font-size: 8px; }
            .font-bold { font-weight: bold; }
            .font-semibold { font-weight: 600; }
            
            /* Colors */
            .text-foreground { color: #000; }
            .text-muted-foreground { color: #666; }
            
            /* Borders */
            .border { border: 1px solid #ddd; }
            .border-2 { border: 2px solid #ddd; }
            .border-4 { border: 4px solid #ddd; }
            .border-t { border-top: 1px solid #ddd; }
            .rounded-xl { border-radius: 8px; }
            .rounded-lg { border-radius: 6px; }
            .rounded-2xl { border-radius: 10px; }
            
            /* Backgrounds */
            .bg-gradient-to-r, .bg-gradient-to-br {
                background: linear-gradient(to right, #f0f9ff 0%, #e0e7ff 100%);
            }
            
            /* Profile Header */
            .from-blue-50 { background: #f0f9ff !important; }
            
            /* Flex */
            .flex { display: flex; }
            .items-center { align-items: center; }
            .items-start { align-items: flex-start; }
            .justify-between { justify-content: space-between; }
            
            /* Photo */
            .w-40 { width: 100px; }
            .h-40 { height: 100px; }
            .w-12 { width: 30px; }
            .h-12 { height: 30px; }
            .w-10 { width: 25px; }
            .h-10 { height: 25px; }
            .w-8 { width: 20px; }
            .h-8 { height: 20px; }
            .w-7 { width: 18px; }
            .h-7 { height: 18px; }
            .w-6 { width: 15px; }
            .h-6 { height: 15px; }
            
            /* Status Badge */
            .inline-flex { display: inline-flex; }
            .rounded-full { border-radius: 9999px; }
            .bg-green-100 { background: #dcfce7; }
            .text-green-800 { color: #166534; }
            .bg-red-100 { background: #fee2e2; }
            .text-red-800 { color: #991b1b; }
            
            /* Cards - Set solid backgrounds for print */
            .from-blue-500 { background: #3b82f6 !important; color: white !important; }
            .from-orange-500 { background: #f97316 !important; color: white !important; }
            .from-purple-500 { background: #a855f7 !important; color: white !important; }
            .from-green-500 { background: #22c55e !important; color: white !important; }
            .from-blue-600 { background: #2563eb !important; color: white !important; }
            
            /* Info cards backgrounds */
            .from-blue-50\\/50 { background: #eff6ff !important; }
            .from-purple-50\\/50 { background: #faf5ff !important; }
            .from-green-50\\/50 { background: #f0fdf4 !important; }
            .from-red-50\\/50 { background: #fef2f2 !important; }
            
            .border-blue-100 { border-color: #dbeafe !important; }
            .border-purple-100 { border-color: #f3e8ff !important; }
            .border-green-100 { border-color: #dcfce7 !important; }
            .border-red-100 { border-color: #fee2e2 !important; }
            
            .bg-blue-500 { background: #3b82f6 !important; }
            .bg-purple-500 { background: #a855f7 !important; }
            .bg-green-500 { background: #22c55e !important; }
            .bg-red-500 { background: #ef4444 !important; }
            
            .text-green-600 { color: #16a34a !important; }
            .text-red-600 { color: #dc2626 !important; }
            
            .border-green-200 { border-color: #bbf7d0 !important; }
            .border-red-200 { border-color: #fecaca !important; }
            
            /* Print Footer */
            #print-footer {
                margin-top: 30px;
                page-break-inside: avoid;
            }
            
            .print-footer-border {
                border-top: 1px solid #333;
                margin-bottom: 10px;
            }
            
            .print-signature-section {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
                padding-top: 40px;
                text-align: center;
            }
            
            .print-signature-line {
                border-top: 1px solid #000;
                width: 150px;
                margin: 0 auto 8px;
            }
            
            .print-signature-box p {
                font-size: 10px;
                margin: 2px 0;
            }
            
            .print-signature-designation {
                font-size: 8px;
                color: #666;
            }
            
            .print-footer-note {
                text-align: center;
                margin-top: 20px;
                padding-top: 10px;
                border-top: 1px dashed #999;
            }
            
            .print-footer-note p {
                font-size: 8px;
                color: #999;
                font-style: italic;
            }
            
            /* Remove shadows and round corners */
            * {
                box-shadow: none !important;
            }
            
            /* Page breaks */
            .space-y-8 > *, .grid > * {
                page-break-inside: avoid;
            }
        `,
        scanStyles: false,
        documentTitle: 'কর্মচারী বিস্তারিত তথ্য - ' + '{{ employee.name }}' + ' ({{ employee.employee_id }})'
    });
}
</script>
{% endblock %}