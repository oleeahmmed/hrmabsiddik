# Generated by Django 5.1.4 on 2025-10-07 19:16

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('core', '0002_company_logo'),
        ('hr_payroll', '0008_attendancelog_location_name_and_more'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='PayrollCycle',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='Cycle Name')),
                ('cycle_type', models.CharField(choices=[('monthly', 'মাসিক'), ('weekly', 'সাপ্তাহিক'), ('biweekly', 'পাক্ষিক')], default='monthly', max_length=20, verbose_name='Cycle Type')),
                ('start_date', models.DateField(verbose_name='Start Date')),
                ('end_date', models.DateField(verbose_name='End Date')),
                ('payment_date', models.DateField(blank=True, null=True, verbose_name='Payment Date')),
                ('status', models.CharField(choices=[('draft', 'ড্রাফট'), ('generated', 'জেনারেট হয়েছে'), ('approved', 'অনুমোদিত'), ('paid', 'পরিশোধিত'), ('closed', 'বন্ধ')], default='draft', max_length=20, verbose_name='Status')),
                ('total_gross_salary', models.DecimalField(decimal_places=2, default=0.0, max_digits=12, verbose_name='Total Gross Salary')),
                ('total_deductions', models.DecimalField(decimal_places=2, default=0.0, max_digits=12, verbose_name='Total Deductions')),
                ('total_net_salary', models.DecimalField(decimal_places=2, default=0.0, max_digits=12, verbose_name='Total Net Salary')),
                ('total_overtime_amount', models.DecimalField(decimal_places=2, default=0.0, max_digits=12, verbose_name='Total Overtime Amount')),
                ('generated_at', models.DateTimeField(blank=True, null=True, verbose_name='Generated At')),
                ('approved_at', models.DateTimeField(blank=True, null=True, verbose_name='Approved At')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_payrolls', to=settings.AUTH_USER_MODEL, verbose_name='Approved By')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='Company')),
                ('generated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='generated_payrolls', to=settings.AUTH_USER_MODEL, verbose_name='Generated By')),
            ],
            options={
                'verbose_name': 'Payroll Cycle',
                'verbose_name_plural': 'Payroll Cycles',
                'ordering': ['-start_date'],
                'unique_together': {('company', 'start_date', 'end_date')},
            },
        ),
        migrations.CreateModel(
            name='PayrollRecord',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('basic_salary', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Basic Salary')),
                ('house_rent_allowance', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='House Rent')),
                ('medical_allowance', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Medical')),
                ('conveyance_allowance', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Conveyance')),
                ('food_allowance', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Food')),
                ('attendance_bonus', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Attendance Bonus')),
                ('festival_bonus', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Festival Bonus')),
                ('other_allowances', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Other Allowances')),
                ('overtime_hours', models.DecimalField(decimal_places=2, default=0.0, max_digits=6, verbose_name='Overtime Hours')),
                ('overtime_rate', models.DecimalField(decimal_places=2, default=0.0, max_digits=8, verbose_name='Overtime Rate')),
                ('overtime_amount', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Overtime Amount')),
                ('working_hours', models.DecimalField(decimal_places=2, default=0.0, max_digits=6, verbose_name='Working Hours')),
                ('hourly_rate', models.DecimalField(decimal_places=2, default=0.0, max_digits=8, verbose_name='Hourly Rate')),
                ('hourly_wage_amount', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Hourly Wage Amount')),
                ('provident_fund', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Provident Fund')),
                ('tax_deduction', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Tax')),
                ('loan_deduction', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Loan')),
                ('absence_deduction', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Absence Deduction')),
                ('other_deductions', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Other Deductions')),
                ('working_days', models.IntegerField(default=0, verbose_name='Working Days')),
                ('present_days', models.DecimalField(decimal_places=1, default=0.0, max_digits=5, verbose_name='Present Days')),
                ('absent_days', models.IntegerField(default=0, verbose_name='Absent Days')),
                ('leave_days', models.IntegerField(default=0, verbose_name='Leave Days')),
                ('half_days', models.IntegerField(default=0, verbose_name='Half Days')),
                ('late_arrivals', models.IntegerField(default=0, verbose_name='Late Arrivals')),
                ('early_departures', models.IntegerField(default=0, verbose_name='Early Departures')),
                ('total_allowances', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Total Allowances')),
                ('total_deductions', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Total Deductions')),
                ('gross_salary', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Gross Salary')),
                ('net_salary', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Net Salary')),
                ('payment_status', models.CharField(choices=[('pending', 'বকেয়া'), ('processing', 'প্রক্রিয়াধীন'), ('paid', 'পরিশোধিত'), ('hold', 'স্থগিত'), ('cancelled', 'বাতিল')], default='pending', max_length=20, verbose_name='Payment Status')),
                ('payment_method', models.CharField(choices=[('cash', 'নগদ'), ('bank_transfer', 'ব্যাংক ট্রান্সফার'), ('cheque', 'চেক'), ('mobile_banking', 'মোবাইল ব্যাংকিং')], default='cash', max_length=30, verbose_name='Payment Method')),
                ('payment_date', models.DateField(blank=True, null=True, verbose_name='Payment Date')),
                ('payment_reference', models.CharField(blank=True, max_length=100, null=True, verbose_name='Payment Reference')),
                ('bank_name', models.CharField(blank=True, max_length=100, null=True, verbose_name='Bank Name')),
                ('bank_account', models.CharField(blank=True, max_length=50, null=True, verbose_name='Bank Account')),
                ('remarks', models.TextField(blank=True, null=True, verbose_name='Remarks')),
                ('generated_at', models.DateTimeField(auto_now_add=True, verbose_name='Generated At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payroll_records', to='hr_payroll.employee', verbose_name='Employee')),
                ('payroll_cycle', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payroll_records', to='hr_payroll.payrollcycle', verbose_name='Payroll Cycle')),
            ],
            options={
                'verbose_name': 'Payroll Record',
                'verbose_name_plural': 'Payroll Records',
                'ordering': ['employee__employee_id'],
            },
        ),
        migrations.CreateModel(
            name='PayrollPayment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Amount')),
                ('payment_date', models.DateField(verbose_name='Payment Date')),
                ('payment_method', models.CharField(max_length=30, verbose_name='Payment Method')),
                ('reference_number', models.CharField(blank=True, max_length=100, null=True, verbose_name='Reference Number')),
                ('transaction_id', models.CharField(blank=True, max_length=100, null=True, verbose_name='Transaction ID')),
                ('status', models.CharField(choices=[('pending', 'বকেয়া'), ('processing', 'প্রক্রিয়াধীন'), ('completed', 'সম্পন্ন'), ('failed', 'ব্যর্থ'), ('cancelled', 'বাতিল')], default='pending', max_length=20, verbose_name='Status')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('processed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='Processed By')),
                ('payroll_record', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payments', to='hr_payroll.payrollrecord', verbose_name='Payroll Record')),
            ],
            options={
                'verbose_name': 'Payroll Payment',
                'verbose_name_plural': 'Payroll Payments',
                'ordering': ['-payment_date'],
            },
        ),
        migrations.CreateModel(
            name='PayrollAdjustment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('adjustment_type', models.CharField(choices=[('addition', 'যোগ'), ('deduction', 'বাদ')], max_length=20, verbose_name='Type')),
                ('title', models.CharField(max_length=200, verbose_name='Title')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Amount')),
                ('description', models.TextField(blank=True, null=True, verbose_name='Description')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('payroll_record', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='adjustments', to='hr_payroll.payrollrecord', verbose_name='Payroll Record')),
            ],
            options={
                'verbose_name': 'Payroll Adjustment',
                'verbose_name_plural': 'Payroll Adjustments',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PayrollTemplate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='Template Name')),
                ('description', models.TextField(blank=True, null=True, verbose_name='Description')),
                ('default_cycle_type', models.CharField(default='monthly', max_length=20, verbose_name='Default Cycle Type')),
                ('payment_day', models.IntegerField(default=5, help_text='Day of month for payment', verbose_name='Payment Day')),
                ('auto_calculate_overtime', models.BooleanField(default=True, verbose_name='Auto Calculate Overtime')),
                ('auto_calculate_deductions', models.BooleanField(default=True, verbose_name='Auto Calculate Deductions')),
                ('auto_calculate_bonuses', models.BooleanField(default=False, verbose_name='Auto Calculate Bonuses')),
                ('perfect_attendance_bonus', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Perfect Attendance Bonus')),
                ('minimum_attendance_for_bonus', models.DecimalField(decimal_places=2, default=95.0, max_digits=5, verbose_name='Min Attendance % for Bonus')),
                ('per_day_absence_deduction_rate', models.DecimalField(decimal_places=2, default=100.0, max_digits=5, verbose_name='Per Day Absence Deduction %')),
                ('late_arrival_penalty', models.DecimalField(decimal_places=2, default=0.0, max_digits=10, verbose_name='Late Arrival Penalty')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.company', verbose_name='Company')),
            ],
            options={
                'verbose_name': 'Payroll Template',
                'verbose_name_plural': 'Payroll Templates',
                'ordering': ['name'],
            },
        ),
        migrations.AddIndex(
            model_name='payrollrecord',
            index=models.Index(fields=['payroll_cycle', 'employee'], name='hr_payroll__payroll_674d33_idx'),
        ),
        migrations.AddIndex(
            model_name='payrollrecord',
            index=models.Index(fields=['payment_status'], name='hr_payroll__payment_6cf931_idx'),
        ),
        migrations.AddIndex(
            model_name='payrollrecord',
            index=models.Index(fields=['payment_date'], name='hr_payroll__payment_05e4ae_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='payrollrecord',
            unique_together={('payroll_cycle', 'employee')},
        ),
    ]
